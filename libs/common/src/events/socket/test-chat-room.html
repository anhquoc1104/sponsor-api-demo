<!--run file in local-->
<!--cd folder-->
<!--http-server-->
<!--https://stackoverflow.com/questions/38497334/how-to-run-html-file-on-localhost-->
<!DOCTYPE html>
<html>

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>

    <script>
      const socketOptions = {
        transportOptions: {
          polling: {
            extraHeaders: {
              Authorization: 'Bearer ' + 'eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJyUWJScmpyV3k4NnB1Ry1jTWthMU9qOVRxSEVrbDNGWHlnd2tPbndHTHpFIn0.eyJleHAiOjE2MjgzNTc4MjIsImlhdCI6MTYyODMyMTgyMiwianRpIjoiNTk2ZTA5YTgtYzhhMy00MThhLTljOWYtMTRjODhkYzQ1NWM1IiwiaXNzIjoiaHR0cDovLzEwLjExLjMwLjQ1OjgwODAvYXV0aC9yZWFsbXMvRklOVklFVCIsImF1ZCI6ImFjY291bnQiLCJzdWIiOiJiYjBmZWYyMi02MTI5LTQzNDUtYWM5Ny0xN2ViYjIyNDU3NGEiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJzYWxlc21hbi1zeXN0ZW0iLCJzZXNzaW9uX3N0YXRlIjoiNWJhNzAxNGMtMjM4Ni00MGE3LTk5OWYtMmQ3NzQ5Y2U0NzRhIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL3NhbGVtYW52Mi5maW52aWV0LmNvbS52biJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsib2ZmbGluZV9hY2Nlc3MiLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InNhbGVzbWFuLXN5c3RlbSI6eyJyb2xlcyI6WyJ1bWFfcHJvdGVjdGlvbiIsInNhbGVzbWFuX3NhbGUiXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoicm9sZXMgcHJvZmlsZSBlbWFpbCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwicm9sZXMiOlsidW1hX3Byb3RlY3Rpb24iLCJzYWxlc21hbl9zYWxlIl0sIm5hbWUiOiJWaWV0IC0gU2FsZSIsInByZWZlcnJlZF91c2VybmFtZSI6IjA5MDc3NDMzNTUiLCJnaXZlbl9uYW1lIjoiVmlldCAtIFNhbGUiLCJlbWFpbCI6IjA5MDc3NDMzNTVAZmludmlldC5jb20udm4ifQ.GQOSwzdJHkrM-0poa1AhYeSXq583zljjjWn-lxFDclY2ZITpGwz0TCLODgIc7ahF8f-_TCc_AQOpZWvY9C8W7VOchKt01aJ_ns6U4MKF_PK3LbkNYOaJCuzUfRkF6HlFGE20a9Th7TVtRKuswfLkQR1T6aY1rH7_0Ni--ng0UF5eWhASFddyYPGDIHZDjIWGhp0syIFA0cLLvY3OXsDRHfhsIlKi8-4aUHgo8LueOvMNBrw0gbnz8llbBv46JaN1FNkHzrIKJmRcnNQIHESUQKQBNwikjyYYypaPiXiSSQfP4jnM7owkfpR9ubJ0prYsyP6BUz0kZnsO2O2pdhKL4A',
            },
          },
        },
      };
      const socket = io('https://dms-uat-api-socket.finviet.com.vn:6868', socketOptions);
      socket.on('connect', function() {
        socket.emit('chat-room', {
          room_id: 'US0907743354-US0907743355',
          message: {
            user_target: '6035c98834f75136789e33a7',
            type: 'USER',
          },
          cmd_type: 'JOIN',
        });

        socket.emit('chat-room',
          { "user":"6035c98834f75136789e33a7",
            "cmd_type":"MESSAGE",
            "room_id":"US0907743354-US0907743355",
            "message":{"type":"USER","content":"tesst aaaaa","images":[]}
          }
        );

        // socket.emit('chat-room', {
        //   room_id: 'US0912121212-US0973267501',
        //   message: {
        //     type: 'USER',
        //     content: 'Chào em gái miền tây',
        //     images: []
        //   },
        //   cmd_type: 'MESSAGE',
        // });

        socket.emit('chat-room', {
          room_id: "US0907743354-US0907743355",
          cmd_type: "LEAVE"
        });

        // test nhóm
        // socket.emit('chat-room', {
        //   room_id: "GR5280257",
        //   message: {
        //     type: 'GROUP'
        //   },
        //   cmd_type: "JOIN"
        // });
        //
        // socket.emit('chat-room', {
        //   room_id: "GR5280257",
        //   message: {
        //     type: 'GROUP',
        //     content: 'chào nhóm gà tây',
        //     images: ['images1', 'images2']
        //   },
        //   cmd_type: "MESSAGE"
        // });

        // socket.emit('chat-room', {
        //   room_id: "GR5280257",
        //   cmd_type: "LEAVE"
        // });

      });
      socket.on('chat-room', response =>
        console.log('data:', response),
      );
      socket.on('events', function(data) {
        console.log('event', data);
      });
      socket.on('exception', function(data) {
        console.log('event', data);
      });
      socket.on('disconnect', function() {
        console.log('Disconnected');
      });
    </script>
</head>

<body></body>

</html>
